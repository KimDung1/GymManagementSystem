<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Qu·∫£n l√Ω g√≥i t·∫≠p</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

  <!-- CSS RI√äNG -->
  <link rel="stylesheet" href="goi-tap.css">

  <!-- Vue 3 CDN -->
  <script src="https://unpkg.com/vue@3"></script>
</head>

<body>

<div id="app" class="layout">

  <!-- ================= SIDEBAR ================= -->
  <aside class="sidebar">
    <div class="logo">GymFit</div>

    <ul class="menu">
      <li><a href="#" class="item active">üí™ G√≥i T·∫≠p</a></li>
    </ul>
  </aside>

  <!-- ================= MAIN CONTENT ================= -->
  <main class="main">

    <!-- ==== TOPBAR ==== -->
    <div class="topbar">
      <input type="text" class="search" placeholder="T√¨m ki·∫øm...">
      <div class="avatar">A</div>
    </div>

    <h3 class="title">Qu·∫£n L√Ω G√≥i T·∫≠p</h3>

    <!-- ================= FORM G√ìI T·∫¨P ================= -->
    <div class="card p-3 mb-4">

      <h5>{{ isEditing ? "C·∫≠p nh·∫≠t g√≥i t·∫≠p" : "Th√™m g√≥i t·∫≠p m·ªõi" }}</h5>

      <form @submit.prevent="luuGoiTap">
        <div class="row g-3">

          <div class="col-md-6">
            <label>T√™n g√≥i *</label>
            <input class="form-control" v-model="form.name" required>
          </div>

          <div class="col-md-6">
            <label>Gi√° *</label>
            <input class="form-control" type="number" v-model.number="form.price" required>
          </div>

          <div class="col-md-6">
            <label>Th·ªùi h·∫°n (ng√†y) *</label>
            <input class="form-control" type="number" v-model.number="form.days" required>
          </div>

          <div class="col-md-6">
            <label>Tr·∫°ng th√°i</label>
            <select class="form-select" v-model="form.status">
              <option value="active">Ho·∫°t ƒë·ªông</option>
              <option value="inactive">Ng∆∞ng ho·∫°t ƒë·ªông</option>
            </select>
          </div>

          <div class="col-12">
            <label>M√¥ t·∫£</label>
            <textarea class="form-control" rows="2" v-model="form.description"></textarea>
          </div>

        </div>

        <button class="btn btn-primary mt-3">{{ isEditing ? "C·∫≠p nh·∫≠t" : "Th√™m m·ªõi" }}</button>
        <button v-if="isEditing" class="btn btn-secondary mt-3 ms-2" @click="huySua">H·ªßy</button>

      </form>
    </div>

    <!-- ================= DANH S√ÅCH ================= -->
    <div class="card p-3">

      <h5 class="mb-3">Danh s√°ch g√≥i t·∫≠p</h5>

      <table class="table table-bordered">
        <thead>
          <tr>
            <th>#</th>
            <th>T√™n g√≥i</th>
            <th>Gi√°</th>
            <th>Th·ªùi h·∫°n</th>
            <th>Tr·∫°ng th√°i</th>
            <th>H√†nh ƒë·ªông</th>
          </tr>
        </thead>

        <tbody>
          <tr v-for="(item, index) in packages" :key="index">
            <td>{{ index + 1 }}</td>
            <td>{{ item.name }}</td>
            <td>{{ dinhDangTien(item.price) }}</td>
            <td>{{ item.days }} ng√†y</td>
            <td>
              <span :class="item.status === 'active' ? 'text-success' : 'text-danger'">
                {{ item.status === 'active' ? "Ho·∫°t ƒë·ªông" : "Ng∆∞ng" }}
              </span>
            </td>
            <td>
              <button class="btn btn-warning btn-sm me-2" @click="batDauSua(index)">S·ª≠a</button>
              <button class="btn btn-danger btn-sm" @click="xoaGoiTap(index)">X√≥a</button>
            </td>
          </tr>
        </tbody>

      </table>
    </div>

  </main>
</div>


<!-- ================= VUE SCRIPT ================= -->
<script>
Vue.createApp({
  data() {
    return {
      packages: [],
      isEditing: false,
      editIndex: null,

      form: {
        name: "",
        price: "",
        days: "",
        status: "active",
        description: "",
      }
    };
  },

  mounted() {
    const ds = localStorage.getItem("goiTap");
    if (ds) this.packages = JSON.parse(ds);
  },

  methods: {
    luuGoiTap() {
      if (this.isEditing) {
        this.packages[this.editIndex] = { ...this.form };
      } else {
        this.packages.push({ ...this.form });
      }

      localStorage.setItem("goiTap", JSON.stringify(this.packages));
      this.resetForm();
    },

    batDauSua(index) {
      this.isEditing = true;
      this.editIndex = index;
      this.form = { ...this.packages[index] };
    },

    huySua() {
      this.resetForm();
    },

    xoaGoiTap(index) {
      if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a kh√¥ng?")) {
        this.packages.splice(index, 1);
        localStorage.setItem("goiTap", JSON.stringify(this.packages));
      }
    },

    resetForm() {
      this.isEditing = false;
      this.editIndex = null;

      this.form = {
        name: "",
        price: "",
        days: "",
        status: "active",
        description: "",
      };
    },

    dinhDangTien(v) {
      return v.toLocaleString("vi-VN") + " ‚Ç´";
    }
  }
}).mount("#app");
</script>

</body>
</html>
